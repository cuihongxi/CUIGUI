#include "CUIGUI_MOUSE.H"
#include "CUIGUI_COLOR.H"
#include "CUI_MALLCO.H"
#include "CUIGUI_LCDDRIVER.H"
Mouse* mouse;
//const u8 mouseMapArray[]= {   //鼠标打点函数 50*30
//0x80,0x00,0x00,0x00,
//0xC0,0x00,0x00,0x00,
//0xE0,0x00,0x00,0x00,
//0xF0,0x00,0x00,0x00,
//0xF8,0x00,0x00,0x00,
//0xFC,0x00,0x00,0x00,
//0xFE,0x00,0x00,0x00,
//0xFF,0x00,0x00,0x00,
//0xFF,0x80,0x00,0x0,
//0xFF,0xC0,0x00,0x00,
//0xFF,0xE0,0x00,0x00,
//0xFF,0xF0,0x00,0x00,
//0xFF,0xF8,0x00,0x00,
//0xFF,0xFC,0x00,0x00,
//0xFF,0xFE,0x00,0x00,
//0xFF,0xFF,0x00,0x00,
//0xFF,0xFF,0x80,0x0,
//0xFF,0xFF,0xC0,0x00,
//0xFF,0xFF,0xE0,0x00,
//0xFF,0xFF,0xF0,0x00,
//0xFF,0xFF,0xF8,0x00,
//0xFF,0xFF,0xFC,0x00,
//0xFF,0xFF,0xFE,0x00,
//0xFF,0xFF,0xFF,0x00,
//0xFF,0xFF,0xFF,0x80,
//0xFF,0xFF,0xFF,0xC0,
//0xFF,0xFF,0xFF,0xE0,
//0xFF,0xFF,0xFF,0xF0,
//0xFF,0xFF,0xFF,0xF8,
//0xFF,0xFF,0xFF,0xFC,
//0xFF,0xFE,0x00,0x00,
//0xFF,0xFF,0x00,0x00,
//0xFF,0xFF,0x00,0x00,
//0xFF,0x9F,0x00,0x00,
//0xFF,0x0F,0x80,0x00,
//0xFE,0x0F,0x80,0x00,
//0xFC,0x07,0xC0,0x00,
//0xF8,0x07,0xC0,0x00,
//0xF0,0x03,0xE0,0x00,
//0xE0,0x03,0xE0,0x00,
//0xC0,0x01,0xF0,0x00,
//0x80,0x01,0xF0,0x00,
//0x00,0x00,0xF8,0x00,
//0x00,0x00,0xF8,0x00,
//0x00,0x00,0x7C,0x00,
//0x00,0x00,0x7C,0x00,
//0x00,0x00,0x3E,0x00,
//0x00,0x00,0x3C,0x00,
//0x00,0x00,0x18,0x00,
//0x00,0x00,0x00,0x00,/*"未命名文件",0*/
//};

const u8 mouseMapArray[]= {   //鼠标打点函数 16*25
      0x80,0x00,
      0xC0,0x00,
      0xE0,0x00,
      0xF0,0x00,
      0xF8,0x00,
      0xFC,0x00,
      0xFE,0x00,
      0xFF,0x00,
      0xFF,0x80,
      0xFF,0xC0,
      0xFF,0xE0,
      0xFF,0xF0,
      0xFF,0xF8,
      0xFF,0xFC,
      0xFF,0xFE,
      0xFF,0xFF,
      0xFF,0xFF,
      0xFF,0x80,
      0xFF,0xC0,
      0xFB,0xC0,
      0xF1,0xE0,
      0xE1,0xE0,
      0xC0,0xF0,
      0x80,0xF8,
      0x00,0x70,
};


const u8 mouseMapArray2[]= {   //鼠标打点函数 16*25
0x00,0x00,0x40,0x00,0x60,0x00,0x70,0x00,0x78,0x00,0x7C,0x00,0x7E,0x00,0x7F,0x00,
0x7F,0x80,0x7F,0xC0,0x7F,0xE0,0x7F,0xF0,0x7F,0xF8,0x7F,0xFC,0x7F,0xFE,0x7F,0xFF,
0x7F,0x00,0x7F,0x80,0x7B,0x80,0x71,0xC0,0x61,0xC0,0x40,0xE0,0x00,0xE0,0x00,0x70,
0x00,0x00,
};

//新建一个鼠标
Mouse* CUIGUI_NewMouse(void)
{
      Mouse* mouse = (Mouse*)CUI_Mallco(sizeof(Mouse));
      
      mouse->x = 100;
      mouse->y = 100;
      mouse->map = mouseMapArray;
      mouse->map2 = mouseMapArray2;
      mouse ->height = 25;
      mouse->width = 16;
      return mouse;
}
//画出鼠标
void CUIGUI_DrawMouse(u16 x0, u16 y0,Mouse* mouse)
{
      u16 i=0;
      u8 m = 0;
      u16 y=0; 
      mouse->x = x0;
      mouse->y = y0;
      while(y< mouse ->height )
      {
            for(i=0;i<mouse->width;i++)
            {
                  mouse->datbuf[y][i] = CUIGUI_ReadPoint(mouse->x+i,mouse->y + y);
                  if((i&7) == 0 && i!=0) m ++;
                  if(mouse->map[y*(mouse->width/8)+m]&(0x80>>(i&7)))
                        CUIGUI_DrawPoint(mouse->x+i,y+(mouse->y),BLACK) ;
                       // else CUIGUI_DrawPoint(mouse->x+i,y+(mouse->y),mouse->datbuf[y][i]);
            } 
            y++;
            m = 0;
      }
      i=0;
      m = 0;
      y=0; 
      while(y< mouse ->height )
      {
            for(i=0;i<mouse->width;i++)
            {
                 
                  if((i&7) == 0 && i!=0) m ++;
                  if(mouse->map2[y*(mouse->width/8)+m]&(0x80>>(i&7)))
                        CUIGUI_DrawPoint(mouse->x+i,y+(mouse->y),WHITE) ;
                       // else CUIGUI_DrawPoint(mouse->x+i,y+(mouse->y),mouse->datbuf[y][i]);
            } 
            y++;
            m = 0;
      }
      

      
}

//鼠标移动
void CUIGUI_MOUSE_Move(u16 x0,u16 y0,Mouse* mouse)
{
      //还原画面
      u16 i=0;     
      u16 y=0; 
      u16 x4;
      while(y< mouse ->height )
      {
            x4 = mouse->x;
//            CUIGUI_SetPosition(mouse->x,mouse->y+y);
//            CUIGUI_FastStart();
            for(i=0;i<mouse->width;i++)
            {                  
                 // CUIGUI_FastDrawPoint(mouse->datbuf[y][i]); 
                  CUIGUI_DrawPoint(x4,mouse->y+y,mouse->datbuf[y][i]);
                  x4 ++;
            } 
            y++;
            
      }  
     CUIGUI_DrawMouse(x0,y0,mouse);
      
}




